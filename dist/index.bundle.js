(()=>{"use strict";const t=JSON.parse('{"type":0,"mapWidth":500,"mapHeight":500,"nodeWidth":100,"nodeHeight":50,"roadDataArr":[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,1,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,1,0,0],[0,1,1,0,0],[0,1,0,1,0],[1,0,0,1,0],[0,1,0,1,0],[0,1,0,0,0],[0,0,1,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],"mapItem":[]}');var e=document.documentElement.clientWidth||document.body.clientWidth,o=document.documentElement.clientHeight||document.body.clientHeight,n=t.mapWidth,i=t.mapHeight;const r=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e},s=function(){function t(){this._value=0,this._f=0,this._g=0,this._h=0,this._parent=null,this.ele=null}return t.prototype.toString2=function(){return"路点世界坐标：（"+this._cx+","+this._cy+"),  "+" g=".concat(this.g)+" h=".concat(this.h)+" f=".concat(this.f)},t.prototype.toString=function(){return"路点像素坐标：（"+this._px+","+this._py+"),  路点世界坐标：（"+this._cx+","+this._cy+"),  路点平面直角坐标：（"+this._dx+","+this._dy+")"},Object.defineProperty(t.prototype,"px",{get:function(){return this._px},set:function(t){this._px=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"py",{get:function(){return this._py},set:function(t){this._py=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cx",{get:function(){return this._cx},set:function(t){this._cx=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cy",{get:function(){return this._cy},set:function(t){this._cy=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dx",{get:function(){return this._dx},set:function(t){this._dx=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dy",{get:function(){return this._dy},set:function(t){this._dy=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"f",{get:function(){return this._f},set:function(t){this._f=t,this.ele&&this.ele.resetText()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"g",{get:function(){return this._g},set:function(t){this._g=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"h",{get:function(){return this._h},set:function(t){this._h=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},set:function(t){this._parent=t},enumerable:!1,configurable:!0}),t}();var a;!function(t){t[t.angle45=0]="angle45",t[t.angle90=1]="angle90",t[t.honeycomb=2]="honeycomb"}(a||(a={}));var h=function(){function t(){}return Object.defineProperty(t,"instance",{get:function(){return null==this._instance&&(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.updateMapInfo=function(t,e,o,n,i){this._mapWidth=t,this._mapHeight=e,this._nodeWidth=o,this._nodeHeight=n,this._halfNodeWidth=Math.floor(this._nodeWidth/2),this._halfNodeHeight=Math.floor(this._nodeHeight/2),this._col=Math.ceil(t/this._nodeWidth),this._row=Math.ceil(e/this._nodeHeight),this._mapType=i,this._mapType===a.angle45&&(this._mapRoad=new l(this._row,this._col,this._nodeWidth,this._nodeHeight,this._halfNodeWidth,this._halfNodeHeight))},t.prototype.getNodeByPixel=function(t,e){return this._mapRoad?this._mapRoad.getNodeByPixel(t,e):new s},t.prototype.getNodeByDerect=function(t,e){return this._mapRoad?this._mapRoad.getNodeByDerect(t,e):new s},t.prototype.getNodeByWorldPoint=function(t,e){return this._mapRoad?this._mapRoad.getNodeByWorldPoint(t,e):new s},t.prototype.getWorldPointByPixel=function(t,e){return this._mapRoad?this._mapRoad.getWorldPointByPixel(t,e):new r},t.prototype.getPixelByWorldPoint=function(t,e){return this._mapRoad?this._mapRoad.getPixelByWorldPoint(t,e):new r},t.prototype.getDerectByPixel=function(t,e){return this._mapRoad?this._mapRoad.getDerectByPixel(t,e):new r},t.prototype.getDerectByWorldPoint=function(t,e){return this._mapRoad?this._mapRoad.getDerectByWorldPoint(t,e):new r},t.prototype.getPixelByDerect=function(t,e){return this._mapRoad?this._mapRoad.getPixelByDerect(t,e):new r},Object.defineProperty(t.prototype,"mapWidth",{get:function(){return this._mapWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mapHeight",{get:function(){return this._mapHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nodeWidth",{get:function(){return this._nodeWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nodeHeight",{get:function(){return this._nodeHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"row",{get:function(){return this._row},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"col",{get:function(){return this._col},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"halfNodeWidth",{get:function(){return this._halfNodeWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"halfNodeHeight",{get:function(){return this._halfNodeHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mapType",{get:function(){return this._mapType},enumerable:!1,configurable:!0}),t}();const c=h;var l=function(){function t(t,e,o,n,i,r){this._row=t,this._col=e,this._nodeWidth=o,this._nodeHeight=n,this._halfNodeWidth=i,this._halfNodeHeight=r}return t.prototype.getNodeByPixel=function(t,e){var o=this.getWorldPointByPixel(t,e),n=this.getPixelByWorldPoint(o.x,o.y),i=this.getDerectByPixel(t,e),r=new s;return r.cx=o.x,r.cy=o.y,r.px=n.x,r.py=n.y,r.dx=i.x,r.dy=i.y,r},t.prototype.getNodeByDerect=function(t,e){var o=this.getPixelByDerect(t,e),n=this.getWorldPointByPixel(o.x,o.y),i=new s;return i.cx=n.x,i.cy=n.y,i.px=o.x,i.py=o.y,i.dx=t,i.dy=e,i},t.prototype.getNodeByWorldPoint=function(t,e){var o=this.getPixelByWorldPoint(t,e);return this.getNodeByPixel(o.x,o.y)},t.prototype.getWorldPointByPixel=function(t,e){var o=Math.ceil(t/this._nodeWidth-.5+e/this._nodeHeight)-1,n=this._col-1-Math.ceil(t/this._nodeWidth-.5-e/this._nodeHeight);return new r(o,n)},t.prototype.getPixelByWorldPoint=function(t,e){var o=Math.floor((t+1-(e-(this._col-1)))*this._halfNodeWidth),n=Math.floor((t+1+(e-(this._col-1)))*this._halfNodeHeight);return new r(o,n)},t.prototype.getDerectByPixel=function(t,e){var o=this.getWorldPointByPixel(t,e),n=this.getPixelByWorldPoint(o.x,o.y),i=Math.floor(n.x/this._nodeWidth)-(n.x%this._nodeWidth==0?1:0),s=Math.floor(n.y/this._halfNodeHeight)-1;return new r(i,s)},t.prototype.getDerectByWorldPoint=function(t,e){var o=Math.floor((t-(e-(this._col-1)))/2),n=t+(e-(this._col-1));return new r(o,n)},t.prototype.getPixelByDerect=function(t,e){var o=Math.floor((t+e%2)*this._nodeWidth+(1-e%2)*this._halfNodeWidth),n=Math.floor((e+1)*this._halfNodeHeight);return new r(o,n)},t}();const d=function(){function t(t){this.COST_STRAIGHT=10,this.COST_DIAGONAL=14,this.maxStep=1e3,this._round=[[0,-1,10],[1,-1,14],[1,0,10],[1,1,14],[0,1,10],[-1,1,14],[-1,0,10],[-1,-1,14]],this.handle=-1,this.optimize=!0,this._roadNodes=t}return t.prototype.resetText=function(){for(var t in this._roadNodes)this._roadNodes[t].ele.htxt.visible=!1},t.prototype.seekPath=function(t,e){if(this._startNode=t,this._currentNode=t,this._targetNode=e,!this._startNode||!this._targetNode)return[];if(console.log("from: ".concat(t.cx,",").concat(t.cy)," to: ".concat(e.cx,",").concat(e.cy)),1===this._targetNode.value)return console.log("目标不可达到："),[];this._openlist=[],this._closelist=[];for(var o=0;;){if(o>this.maxStep)return console.log("没找到目标计算步骤为：",o),[];if(o++,this.searchRoundNodes(this._currentNode),0==this._openlist.length)return console.log("没找到目标计算步骤为：",o),[];if(this._openlist.sort(this.sortNode),this._currentNode=this._openlist.shift(),this._currentNode==this._targetNode)return console.log("找到目标计算步骤为：",o),this.getPath();this._closelist.push(this._currentNode)}return[]},t.prototype.seekPath2=function(t,e){if(this._startNode=t,this._currentNode=t,this._targetNode=e,!this._startNode||!this._targetNode)return[];console.log("from:(".concat(t.cx,",").concat(t.cy,")")," to:(".concat(e.cx,",").concat(e.cy,")")),this.resetText(),this._openlist=[],this._closelist=[];for(var o=0,n=null;;){if(o>this.maxStep)return console.log("没找到目标计算步骤为：",o),this.seekPath(t,n);if(o++,this.searchRoundNodes(this._currentNode),0==this._openlist.length)return console.log("没找到目标计算步骤为：",o),this.seekPath(t,n);if(this._openlist.sort(this.sortNode),this._currentNode=this._openlist.shift(),(null==n||this._currentNode.h<n.h)&&(n=this._currentNode),this._currentNode==this._targetNode)return console.log("找到目标计算步骤为：",o),this.getPath();this._closelist.push(this._currentNode)}return this.seekPath(t,n)},t.prototype.sortNode=function(t,e){return t.f<e.f?-1:t.f>e.f?1:0},t.prototype.getPath=function(){for(var t=[],e=this._targetNode;e!=this._startNode;)t.unshift(e),e=e.parent;if(t.unshift(this._startNode),!this.optimize)return t;for(var o=1;o<t.length-1;o++){var n=t[o-1],i=t[o],r=t[o+1],s=i.cx==n.cx&&i.cx==r.cx,a=i.cy==n.cy&&i.cy==r.cy,h=(i.cx-n.cx)/(i.cy-n.cy)*((r.cx-i.cx)/(r.cy-i.cy))==1;(s||a||h)&&(t.splice(o,1),o--)}for(o=0;o<t.length-2;o++){for(var c=t[o],l=null,d=t.length-1;d>o+1;d--){var u=t[d];if(c.cx!=u.cx&&c.cy!=u.cy&&Math.abs(u.cx-c.cx)!=Math.abs(u.cy-c.cy)&&this.isArriveBetweenTwoNodes(c,u)){l=u;break}}if(l){var p=d-o-1;t.splice(o+1,p)}}return t},t.prototype.isArriveBetweenTwoNodes=function(t,e){if(t==e)return!1;var o=Math.abs(e.cx-t.cx),n=Math.abs(e.cy-t.cy),i=0;e.cx>t.cx?i=1:e.cx<t.cx&&(i=-1);var r=0;e.cy>t.cy?r=1:e.cy<t.cy&&(r=-1);var s=0,a=0,h=0,c=0;if(o>n)for(var l=n/o,d=0;d<o;d++){a=t.cy+d*r*l,h=Math.floor(a),c=a%1;var u=t.cx+d*i,p=c<=.5?h:h+1;a=t.cy+(d+1)*r*l,h=Math.floor(a),c=a%1;var f=t.cx+(d+1)*i,y=c<=.5?h:h+1,_=this._roadNodes[u+"_"+p],g=this._roadNodes[f+"_"+y];if(!this.isCrossAtAdjacentNodes(_,g))return!1}else for(l=o/n,d=0;d<n;d++)if(s=d*i*l,h=i>0?Math.floor(t.cx+s):Math.ceil(t.cx+s),u=(c=Math.abs(s%1))<=.5?h:h+1*i,p=t.cy+d*r,s=(d+1)*i*l,h=i>0?Math.floor(t.cx+s):Math.ceil(t.cx+s),f=(c=Math.abs(s%1))<=.5?h:h+1*i,y=t.cy+(d+1)*r,_=this._roadNodes[u+"_"+p],g=this._roadNodes[f+"_"+y],!this.isCrossAtAdjacentNodes(_,g))return!1;return!0},t.prototype.isCrossAtAdjacentNodes=function(t,e){if(t==e)return!1;if(!this.isPassNode(t)||!this.isPassNode(e))return!1;var o=e.cx-t.cx,n=e.cy-t.cy;return!(Math.abs(o)>1||Math.abs(n)>1||t.cx!=e.cx&&t.cy!=e.cy&&(!this.isPassNode(this._roadNodes[t.cx+"_"+(t.cy+n)])||!this.isPassNode(this._roadNodes[t.cx+o+"_"+t.cy])))},t.prototype.isPassNode=function(t){return!(!t||1==t.value)},t.prototype.testSeekPathStep=function(t,e,o,n,i){var r=this;if(void 0===i&&(i=100),this._startNode=t,this._currentNode=t,this._targetNode=e,1!=this._targetNode.value){this._openlist=[],this._closelist=[];var s=0;clearInterval(this.handle),this.handle=setInterval((function(){return s>r.maxStep?(console.log("没找到目标计算步骤为：",s),void clearInterval(r.handle)):(s++,r.searchRoundNodes(r._currentNode),0==r._openlist.length?(console.log("没找到目标计算步骤为：",s),void clearInterval(r.handle)):(r._openlist.sort(r.sortNode),r._currentNode=r._openlist.shift(),void(r._currentNode==r._targetNode?(console.log("找到目标计算步骤为：",s),clearInterval(r.handle),o.apply(n,[r._startNode,r._targetNode,r._currentNode,r._openlist,r._closelist,r.getPath()])):(r._closelist.push(r._currentNode),o.apply(n,[r._startNode,r._targetNode,r._currentNode,r._openlist,r._closelist,null])))))}),i)}},t.prototype.searchRoundNodes=function(t){var e=this;this._round.forEach((function(o,n){var i=o[0],r=o[1],s=(o[2],t.cx+i),a=t.cy+r,h=e._roadNodes[s+"_"+a];null==h||h==e._startNode||1===h.value||e.isInCloseList(h)||e.isInCorner(h)||e.setNodeF(h)}))},t.prototype.setNodeF=function(t){var e;if(e=t.cx==this._currentNode.cx||t.cy==this._currentNode.cy?this._currentNode.g+this.COST_STRAIGHT:this._currentNode.g+this.COST_DIAGONAL,this.isInOpenList(t)){if(!(e<t.g))return;t.g=e}else t.g=e,this._openlist.push(t);t.h=(Math.abs(this._targetNode.cx-t.cx)+Math.abs(this._targetNode.cy-t.cy))*this.COST_STRAIGHT,t.f=t.g+t.h,t.parent=this._currentNode},t.prototype.isInOpenList=function(t){return-1!=this._openlist.indexOf(t)},t.prototype.isInCloseList=function(t){return-1!=this._closelist.indexOf(t)},t.prototype.isInCorner=function(t){if(t.cx==this._currentNode.cx||t.cy==this._currentNode.cy)return!1;var e=this._roadNodes[this._currentNode.cx+"_"+t.cy],o=this._roadNodes[t.cx+"_"+this._currentNode.cy];return!this.isPassNode(e)||!this.isPassNode(o)},t.prototype.dispose=function(){this._roadNodes=null,this._round=null},t}();var u,p=(u=function(t,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},u(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});const f=function(t){function e(){var e=t.call(this)||this,o=new PIXI.Loader;return o.add("spritesheet","./static/assets/mc.json"),o.once("complete",e.onLoadComplete.bind(e)),o.load(),e}return p(e,t),e.prototype.onLoadComplete=function(){for(var t=this,e=[],o=1;o<=64;o++){var n=PIXI.Texture.from("Explosion_Sequence_A ".concat(o,".png"));e.push(n)}var i=this.player=new PIXI.AnimatedSprite(e);i.onFrameChange=function(){var e=i.currentFrame;(e>t.endFrame||56===t.startFrame&&0===e)&&i.gotoAndPlay(t.startFrame)},i.x=0,i.y=0,i.anchor.set(.5,.65625),i.gotoAndStop(49),i.animationSpeed=.2,this.addChild(i),this.x=350,this.y=125;var r=new PIXI.Graphics;r.beginFill(14561865),r.drawRect(0,0,5,5),r.endFill(),this.addChild(r)},e.prototype.play=function(t){0===t?(this.startFrame=32,this.endFrame=39):t>0&&t<90?(this.startFrame=40,this.endFrame=47):90===t?(this.startFrame=48,this.endFrame=55):t>90&&t<180?(this.startFrame=56,this.endFrame=63):180===t?(this.startFrame=0,this.endFrame=7):t<-90&&t>-180?(this.startFrame=8,this.endFrame=15):-90===t?(this.startFrame=16,this.endFrame=23):t<0&&t>-90&&(this.startFrame=24,this.endFrame=31),this.player.gotoAndPlay(this.startFrame)},e.prototype.stop=function(){this.player.gotoAndStop(this.startFrame)},e}(PIXI.Container);var y=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();console.log("mapdata8:",t);const _=function(e){function o(){var t=e.call(this)||this;return t._roadDic={},t.init(),t}return y(o,e),o.prototype.init=function(){var e=this,o=null,n=new PIXI.Container;this.addChild(n),n.interactive=!0,n.on("pointerdown",(function(t){o={x:t.data.global.x,y:t.data.global.y}})),n.on("pointerup",(function(t){if(o){var i=o.x,r=o.y,s={x:t.data.global.x,y:t.data.global.y},a=s.x,h=s.y;if(Math.sqrt((a-i)*(a-i)+(h-r)*(h-r))<1){e.startNode&&e.startNode.resetBg(),e.targetNode&&e.targetNode.resetBg();var l=t.data.getLocalPosition(n.parent),d=l.x,u=l.y,p=c.instance.getWorldPointByPixel(e.player.x,e.player.y),f=c.instance.getWorldPointByPixel(d,u),y=e._roadDic[p.x+"_"+p.y],_=e._roadDic[f.x+"_"+f.y];console.log(y,_);var g=e._roadSeeker.seekPath2(y,_);console.log(g),g.length>=2&&(e.startNode=g[0].ele.setBGColor(0,.5),e.targetNode=g[g.length-1].ele.setBGColor(16777215,.5));var x=window.TweenMax.getTweensOf(e.player);x&&x.length&&x[0].kill(),e.roadNodeArr=g,e.move()}}o=null})),this.player=new f,this.addChild(this.player),c.instance.updateMapInfo(t.mapWidth,t.mapHeight,t.nodeWidth,t.nodeHeight,t.type);for(var i=t.roadDataArr.length,r=t.roadDataArr[0].length,s=0,a=0;a<i;a++)for(var h=0;h<r;h++){s=t.roadDataArr[a][h];var l=c.instance.getNodeByDerect(h,a);if(l.value=s,this._roadDic[l.cx+"_"+l.cy]=l,a<200&&h<200){var u=new g(l);n.addChild(u),l.ele=u}}this._roadSeeker=new d(this._roadDic)},o.prototype.getGridByPixel=function(e,o){var n=t.roadDataArr[0].length-1;return{x:Math.ceil(e/100-.5+o/50)-1,y:n-Math.ceil(e/100-.5-o/50)}},o.prototype.move=function(){if(this.roadNodeArr&&this.roadNodeArr.length>0){var t=this.roadNodeArr.shift();console.log(t.toString());var e=t.px-this.player.x,o=t.py-this.player.y,n=180/Math.PI*Math.atan2(o,e);this.player.play(n);var i=Math.sqrt(e*e+o*o),r=Math.abs(i)/100*1;window.TweenMax.to(this.player,r,{x:t.px,y:t.py,ease:window.Power0.easeNone,onComplete:this.move.bind(this)})}else this.player.stop()},o}(PIXI.Container);var g=function(e){function o(o){var n=e.call(this)||this;n.node=o;var i=o.cx,r=o.cy,s=o.dx,a=o.dy,h=o.px,c=o.py,l=o.value;n.x=h,n.y=c;var d=t.nodeWidth;t.nodeHeight,n.bg=new PIXI.Graphics,n.addChild(n.bg),n.setBGColor(0===l?32768:16711680,0===l?.5:1);var u=new PIXI.Graphics;u.beginFill(16777215,1),u.drawCircle(0,0,2),u.endFill(),n.addChild(u);var p={fontSize:12,fill:16777215,align:"center"},f=new PIXI.Text("".concat(s,"/").concat(a),p);n.addChild(f),f.anchor.set(.5,.5),f.x=0,f.y=0,f.angle=26.56505117707799;var y=new PIXI.Text("".concat(i,"/").concat(r),p);y.anchor.set(1,0),n.addChild(y),y.x=d/2-3,y.y=-3,y.angle=26.56505117707799;var _=new PIXI.Text("".concat(i,"/").concat(r),p);return n.addChild(_),_.anchor.set(0,1),_.x=-d/2+7,_.y=2,_.angle=26.56505117707799,_.visible=!1,n.htxt=_,n}return y(o,e),o.prototype.resetText=function(){this.htxt.visible=!0,this.htxt.text="".concat(this.node.g,",").concat(this.node.h,",").concat(this.node.f)},o.prototype.setBGColor=function(e,o){var n=t.nodeWidth,i=t.nodeHeight,r=this.bg;return r.clear(),r.beginFill(e,o),r.lineStyle(1,16777215,.3),r.moveTo(-n/2,0),r.lineTo(0,-i/2),r.lineTo(n/2,0),r.lineTo(0,i/2),r.closePath(),r.endFill(),this},o.prototype.resetBg=function(){var t=this.node.value;this.setBGColor(0===t?32768:16711680,0===t?.5:1)},o}(PIXI.Container),x=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const m=function(t){function e(e){void 0===e&&(e={});var o=t.call(this,e)||this;return o.init(),o}return x(e,t),e.prototype.init=function(){document.body.prepend(this.view);var t=new _;this.stage.addChild(t)},e}(PIXI.Application);(function(){function t(t){var e=(this.config=t).ele;this.ele=e,this.ele.interactive=!0,this.ele.on("pointerdown",this.onDragStart,this)}t.prototype.onDragStart=function(t){var e=t.data.global,o=e.x,n=e.y;this.dragging=!0,this.offset={x:this.ele.x-o,y:this.ele.y-n},this.ele.on("pointerup",this.onDragEnd,this),this.ele.on("pointerupoutside",this.onDragEnd,this),this.ele.on("pointermove",this.onDragMove,this)},t.prototype.onDragEnd=function(){this.dragging=!1,this.offset=null,this.ele.off("pointerup",this.onDragEnd,this).off("pointerupoutside",this.onDragEnd,this).off("pointermove",this.onDragMove,this)},t.prototype.onDragMove=function(t){if(this.dragging){var r=t.data.global,s=r.x,a=r.y,h=s+this.offset.x;h=h>=0?0:h<=-(n*this.ele.scale.x-e)?-(n*this.ele.scale.x-e):h;var c=a+this.offset.y;c=c>=0?0:c<=-(i*this.ele.scale.y-o)?-(i*this.ele.scale.y-o):c,this.ele.x=h,this.ele.y=c}}})(),function(){function t(t){var e=this._options=t,o=e.content,n=e.maskWidth,i=e.maskHeight,r=e.contentWidth,s=e.contentHeight;this._content=o,this._maskWidth=n,this._maskHeight=i,this._contentWidth=r,this._contentHeight=s,this._deceleration=.001,this._content.on("pointerdown",this.onPointerDownListener,this)}t.prototype.onPointerDownListener=function(){var t=window.TweenMax.getTweensOf(this._content);t.length&&t[0].kill(),this._start={time:(new Date).getTime(),x:this._content.x,y:this._content.y},this._content.on("pointerup",this.onPointerUpListener,this),this._content.on("pointerout",this.onPointerOutListener,this)},t.prototype.onPointerUpListener=function(){if(this._start){var t=(new Date).getTime()-this._start.time,e=this.momentum(this._content.x,this._start.x,t,this.maxScrollLeft,0,this._deceleration),o=this.momentum(this._content.y,this._start.y,t,this.maxScrollTop,0,this._deceleration),n=e.destination,i=o.destination,r=Math.max(e.duration,o.duration),s={x:n,y:i,ease:window.Power2.easeOut,onUpdate:function(){},onComplete:function(){}};window.TweenMax.to(this._content,r/1e3,s)}this._content.off("pointerup",this.onPointerUpListener,this),this._content.off("pointerout",this.onPointerOutListener,this)},t.prototype.onPointerOutListener=function(){this.onPointerUpListener()},t.prototype.momentum=function(t,e,o,n,i,r){void 0===r&&(r=6e-4);var s,a,h,c=t-e,l=Math.abs(c)/o;return a=l/r,(s=t+(l*(h=(0-l)/r)+.5*r*h*h)*(c>0?-1:1))<n?(s=i?n-i/2.5*(l/8):n,a=(c=Math.abs(s-t))/l):s>0&&(s=i?i/2.5*(l/8):0,a=(c=Math.abs(t)+s)/l),{destination:Math.round(s),duration:a}},Object.defineProperty(t.prototype,"contentWidth",{set:function(t){this._contentWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contentHeight",{set:function(t){this._contentHeight=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxScrollLeft",{get:function(){return this._maskWidth-this._contentWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxScrollTop",{get:function(){return this._maskHeight-this._contentHeight},enumerable:!1,configurable:!0})}(),new m({width:e,height:o,backgroundColor:13421772})})();